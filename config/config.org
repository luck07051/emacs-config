#+TITLE: Config File
#+AUTHOR: uima
#+DESCRIPTION: The emacs config file

* TOC                                                                   :TOC:
- [[#evil-mode][Evil Mode]]
  - [[#dont-use-clipboard-as-default-register][Don't use clipboard as default Register]]
  - [[#evil-collection][Evil Collection]]
  - [[#evil-snipe][Evil Snipe]]
  - [[#evil-surround][Evil Surround]]
- [[#vertico][Vertico]]
  - [[#savehist][Savehist]]
  - [[#hotfuzz][Hotfuzz]]
- [[#projectile][Projectile]]
- [[#which-key][Which Key]]
- [[#nerd-icons][Nerd Icons]]
- [[#keybinding][Keybinding]]
  - [[#define-leader-key][Define Leader key]]
  - [[#normal][Normal]]
  - [[#copy-paste][Copy Paste]]
  - [[#file][File]]
  - [[#toggle-ui][Toggle UI]]
- [[#theme][Theme]]
- [[#mode-line][Mode Line]]
- [[#ui][UI]]
  - [[#disable-gui-bars][Disable GUI Bars]]
  - [[#disable-blink-cursor][Disable Blink Cursor]]
  - [[#number][Number]]
  - [[#line-warp][Line Warp]]
  - [[#show-trailing-space][Show Trailing Space]]
  - [[#window-size][Window Size]]
  - [[#transparency][Transparency]]
  - [[#centering-content][Centering Content]]
  - [[#show-parens][Show parens]]
- [[#others][Others]]
  - [[#dont-create-backup-file][Dont create backup file]]
  - [[#remove-trailing-space-when-save][Remove trailing space when save]]
  - [[#spell-checker][Spell checker]]
  - [[#scratch-message][Scratch message]]

* Evil Mode
#+begin_src emacs-lisp
(use-package evil
  :init
  (setq evil-want-keybinding nil)
  (setq evil-vsplit-window-right t)
  (setq evil-split-window-below t)
  :config
  (evil-mode 1))
#+end_src

** Don't use clipboard as default Register
#+begin_src emacs-lisp
(setq select-enable-clipboard nil)
#+end_src

** Evil Collection
#+begin_src emacs-lisp
(use-package evil-collection
  :after evil
  :config
  (evil-collection-init))
#+end_src

** Evil Snipe
2-char searching and repeated f/t
#+begin_src emacs-lisp
(use-package evil-snipe
  :after evil
  :config
  (evil-snipe-mode 1)
  (evil-snipe-override-mode 1)
  (setq evil-snipe-scope 'visible))
#+end_src

** Evil Surround
#+begin_src emacs-lisp
(use-package evil-surround
  :after evil
  :config
  (global-evil-surround-mode 1))
#+end_src

* Vertico
The completion mechanism
#+begin_src emacs-lisp
(use-package vertico
  :init
  (setq read-file-name-completion-ignore-case t
        read-buffer-completion-ignore-case t
        completion-ignore-case t)
  :config
  (vertico-mode 1))
#+end_src

** Savehist
History plug for Vertico
#+begin_src emacs-lisp
(use-package savehist
  :after vertico
  :config
  (savehist-mode 1))
#+end_src

** Hotfuzz
Fuzzy search
#+begin_src emacs-lisp
(use-package hotfuzz
  :after vertico
  :init
  (setq completion-styles '(hotfuzz))
  :config
  (require 'hotfuzz))
#+end_src

* Projectile
#+begin_src emacs-lisp
(use-package projectile
  :config
  (projectile-mode 1)
  (define-key projectile-mode-map (kbd "C-c p") 'projectile-command-map))
#+end_src

* Which Key
#+begin_src emacs-lisp
(use-package which-key
  :config
  (which-key-mode)
  (setq which-key-idle-delay 0.8))
#+end_src

* Nerd Icons
#+begin_src emacs-lisp
(use-package nerd-icons)
#+end_src

* Keybinding
** Define Leader key
#+begin_src emacs-lisp
(evil-set-leader nil (kbd "SPC"))
(evil-set-leader nil (kbd ",") 1) ;; set local leader
#+end_src

** Normal
#+begin_src emacs-lisp
(evil-define-key nil 'global
  (kbd "<next>") 'evil-scroll-down
  (kbd "<prior>") 'evil-scroll-up)

(evil-define-key 'normal 'global
  (kbd "<leader>rg") 'rgrep  ;; searching context
  ;;(kbd "") 'next-error
  ;;(kbd "") 'previous-error

  (kbd "<backspace>") 'evil-buffer  ;; alternate file
  (kbd ";") 'projectile-find-file  ;; find file

  (kbd "gc") 'comment-line  ;; comment out the line

  (kbd "<leader>ec") '(lambda () (interactive) (load-file "~/.config/emacs/init.el"))  ;; eval the config file

  (kbd "<leader>bb") 'switch-to-buffer
  (kbd "<leader>bi") 'ibuffer
  (kbd "<leader>bk") 'kill-this-buffer
  (kbd "<leader>bK") 'kill-other-buffer
  (kbd "<leader>br") 'revert-buffer
  )

(evil-define-key 'visual 'global
  (kbd "<leader>sh") 'shell-command-on-region  ;; execute a cmd on selection

  (kbd "gc") 'comment-region  ;; comment out the region

  (kbd "<leader>er") 'eval-region  ;; eval the selection
  )
#+end_src

*** TODO Kill other buffer
dont works as keybind
#+begin_src emacs-lisp
(defun kill-other-buffers ()
  "Kill all other buffers."
  (interactive)
  (mapc 'kill-buffer (cdr (buffer-list (current-buffer)))))
#+end_src

** Copy Paste
#+begin_src emacs-lisp
(evil-define-key 'normal 'global (kbd "Y") "y$")

(evil-define-key nil 'global
  (kbd "<XF86Copy>") 'my:yank
  (kbd "<XF86Paste>") "\"+p"
  (kbd "<XF86Cut>") 'my:delete)

(evil-define-key '(normal visual) 'global
  (kbd "<leader>y") 'my:yank
  (kbd "<leader>Y") "\"+y$"
  (kbd "<leader>p") "\"+p"
  (kbd "<leader>P") "\"+P"
  (kbd "<leader>d") 'my:delete
  (kbd "<leader>D") "\"+D")

(defun my:yank ()
  (interactive)
  (evil-use-register ?+)
  (call-interactively 'evil-yank))
(defun my:delete ()
  (interactive)
  (evil-use-register ?+)
  (call-interactively 'evil-delete))
#+end_src

** File
#+begin_src emacs-lisp
(evil-define-key 'normal 'global
  (kbd "<leader>ff") 'find-file
  (kbd "<leader>fe") 'projectile-find-file
  (kbd "<leader>fp") 'projectile-switch-project
  (kbd "<leader>fi") 'projectile-add-known-project
  (kbd "<leader>fr") 'recentf
  (kbd "<leader>fc") '(lambda () (interactive) (find-file "~/.config/emacs/config/config.org"))
  (kbd "<leader>fo") '(lambda () (interactive) (find-file "~/org/inbox.org"))

  (kbd "<leader>fm") 'make-directory
  (kbd "<leader>fd") 'delete-file
  )
#+end_src

** Toggle UI
#+begin_src emacs-lisp
(evil-define-key '(normal visual) 'global
  (kbd "<leader>tn") 'display-line-numbers-mode
  (kbd "<leader>tw") 'visual-line-mode  ;; warp line
  (kbd "<leader>tt") 'toggle-transparency
  )
#+end_src

*** Toggle Transparency
#+begin_src emacs-lisp
(defun toggle-transparency ()
  "Toggle transparency."
  (interactive)
  (pcase (frame-parameter nil 'alpha-background)
    (100 (set-frame-parameter nil 'alpha-background 90))
    (90  (set-frame-parameter nil 'alpha-background 50))
    (50  (set-frame-parameter nil 'alpha-background 100))))
#+end_src

* Theme
#+begin_src emacs-lisp
(use-package doom-themes
  :config
  (setq doom-themes-enable-bold t    ; if nil, bold is universally disabled
	doom-themes-enable-italic t) ; if nil, italics is universally disabled
  (load-theme 'doom-one t)

  ;; Enable flashing mode-line on errors
  (doom-themes-visual-bell-config)
  ;; Enable custom neotree theme (all-the-icons must be installed!)
  (doom-themes-neotree-config)
  ;; or for treemacs users
  (setq doom-themes-treemacs-theme "doom-atom") ; use "doom-colors" for less minimal icon theme
  (doom-themes-treemacs-config)
  ;; Corrects (and improves) org-mode's native fontification.
  (doom-themes-org-config))

;; Custom colors
(set-foreground-color "#bcbcbc")
(set-background-color "#161616")
(add-to-list 'default-frame-alist '(foreground-color . "#bcbcbc"))
(add-to-list 'default-frame-alist '(background-color . "#161616"))
(custom-set-faces
 '(org-block-begin-line
   ((t (:background "#202020" :extend t))))
 '(org-block
   ((t (:background "#202020" :extend t))))
 '(org-block-end-line
   ((t (:background "#202020" :extend t))))
 '(org-link
   ((t (:foreground "#86a586" :extend t))))
 )
#+end_src

* Mode Line
#+begin_src emacs-lisp
(use-package doom-modeline
  :config
  (doom-modeline-mode 1))
#+end_src

* UI
** Disable GUI Bars
#+begin_src emacs-lisp
(menu-bar-mode 0)
(tool-bar-mode 0)
(scroll-bar-mode 0)
#+end_src

** Disable Blink Cursor
#+begin_src emacs-lisp
(blink-cursor-mode 0)
#+end_src

** Number
#+begin_src emacs-lisp
(global-display-line-numbers-mode 1)
#+end_src

** Line Warp
#+begin_src emacs-lisp
(global-visual-line-mode 1)
#+end_src

** Show Trailing Space
#+begin_src emacs-lisp
(setq-default show-trailing-whitespace t)
;; Disable in these modes
(dolist (hook '(special-mode-hook
		term-mode-hook
		comint-mode-hook
		compilation-mode-hook
		minibuffer-setup-hook))
  (add-hook hook
	    (lambda () (setq show-trailing-whitespace nil))))
#+end_src

** Window Size
#+begin_src emacs-lisp
(add-to-list 'default-frame-alist '(width . 110))
(add-to-list 'default-frame-alist '(height . 40))
#+end_src

** Transparency
#+begin_src emacs-lisp
(set-frame-parameter nil 'alpha '(100 100))
(add-to-list 'default-frame-alist '(alpha 100 100))
(set-frame-parameter nil 'alpha-background 90)
(add-to-list 'default-frame-alist '(alpha-background . 90))
#+end_src

** Centering Content
#+begin_src emacs-lisp
(use-package sublimity
  :config
  (require 'sublimity-attractive)
  ;; Keep content on center
  (setq sublimity-attractive-centering-width 90)
  ;; Enable smooth scrolling
  (sublimity-mode 1))
#+end_src

** Show parens
#+begin_src emacs-lisp
(define-advice show-paren-function (:around (fn) fix)
  "Highlight enclosing parens."
  (cond ((looking-at-p "\\s(") (funcall fn))
	(t (save-excursion
	     (ignore-errors (backward-up-list))
	     (funcall fn)))))
#+end_src

* Others
** Dont create backup file
#+begin_src emacs-lisp
(setq make-backup-files nil)
#+end_src

** Remove trailing space when save
#+begin_src emacs-lisp
(add-hook 'before-save-hook 'delete-trailing-whitespace)
#+end_src

** Spell checker
#+begin_src emacs-lisp
(setq ispell-program-name "/usr/bin/aspell")
#+end_src

** Scratch message
#+begin_src emacs-lisp
(setq initial-scratch-message "")
#+end_src
